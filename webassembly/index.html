<!DOCTYPE html>
<html lang="zh-Hans">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="author" content="xgqfrms">
    <meta name="generator" content="VS code">
    <title>WebAssembly</title>
    <style lang="css">
      #app {
        background: #000;
        color: #fff;
        margin: 10px;
        padding: 10px;
      }
      #pre{
        background: #000;
        color: #0f0;
        margin: 10px;
        padding: 10px;
      }
    </style>
</head>
<body>
    <header>
      <h1>WebAssembly demo</h1>
    </header>
    <section id="app">
      loading...
    </section>
    <pre id="pre">
      <!-- wat -->
;; 编译器

;; C/C++ => WASM (.c/.cpp => .wasm)
;; https://mbebenita.github.io/WasmExplorer/

;; WAT/WAST => WASM (.wat/.wast => .wasm)
;; https://webassembly.github.io/wabt/demo/wat2wasm/

;; Rust => WASM (.rs => .wasm)
;; https://github.com/yewstack/yew
;; https://developer.mozilla.org/en-US/docs/WebAssembly/Rust_to_wasm


;; WebAssembly text format
;; To enable WebAssembly to be read and edited by humans, there is a textual representation of the wasm binary format.
;; 为了使 WebAssembly 能够被人类阅读和编辑，有一个 wasm 二进制格式的文本表示。

;; js's Math.sqrt(4) === 2
;; wat define method `sqrt`
(module
    (export "sqrt" (func $sqrt))
    (func $sqrt
        (param $num f32)
        (result f32)
        ;; get_local ❌ WebAssembly draft
        ;; (f32.sqrt (get_local $num))
        ;; local.get ✅ WebAssembly Specification
        (f32.sqrt (local.get $num))
    )
)
    </pre>
    <footer>
        <p>copyright&copy; xgqfrms 2022</p>
    </footer>
    <script src="./app.js"></script>
</body>
</html>
